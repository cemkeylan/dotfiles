#!/bin/sh

# Add to todo.txt file

# pacman -Q calcurse >/dev/null 2>&1 && echo "There is currently no way to add a todo entry to Calcurse" || echo $1 | tee -a $HOME/todo.txt


if [ -z "$(pacman -T calcurse)" ]
then
	if [ -z $1 ]
	then
		printf "Add a todo item: "
		read todo
		printf "Set priority [0-9]: "
		read pri
		re='^[0-9]+$'
		if ! [[ $pri =~ $re ]] ; then
   			echo "error: Not a number" >&2; exit 1
		fi
		echo -e "[$pri] $todo" >> $HOME/.calcurse/todo
	else
		echo $1 | xargs -r echo [0] | tee -a $HOME/.calcurse/todo
	fi
else
	echo $1 | tee -a $HOME/todo.txt
fi
