#!/bin/sh

case $(ps aux) in
	*polybar*)
		kill $(pidof polybar)
		;;
	*)
		;;
esac
sleep 1
case $1 in
	morning)
		polybar -q top >/dev/null 2>&1 &
		sleep 1
		polybar -q bottom >/dev/null 2>&1 &
		;;
	night)
		polybar -q topnight >/dev/null 2>&1 &
		sleep 1
		polybar -q bottomnight >/dev/null 2>&1 &
		;;
	*)
		if [ -e $HOME/.night ]
		then
			if [ $(tail -n -1 $HOME/.night) = "NIGHT=1" ]
			then
				$HOME/bin/polyrestart night
			elif [ $(tail -n -1 $HOME/.night) = "NIGHT=0" ]
			then
				$HOME/bin/polyrestart morning
			else
				echo Unexpected error
			fi
		fi
		;;
esac
